const __vite__fileDeps=["assets/APlayer.min-CAgWaKXK.js","assets/commonjsHelpers-Cpj98o6Y.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{g as p,h as f,i as y,j as v,u as _,k as h,n as w,r as P,o as g,c as A,a as o,l as E,d as x,_ as k}from"./app-BR0m1RLZ.js";const B={class:"music-container"},I=o("div",{id:"musicAPlayer"},null,-1),L=p({__name:"NavMusic",setup(b){let i,a=f([]);const c=y(!1),u=()=>{const e=document.querySelector(".vp-navbar-end");if(!e)return;if(!document.querySelector("#music-btn")){const n=document.createElement("div");n.id="music-btn",n.classList.add("nav-item"),n.innerHTML='<div id="music-icon" class="btnImg"/>',e.appendChild(n)}const s=document.querySelector("#music-btn");s.onclick=n=>{c.value=!c.value,n.stopPropagation()};const t=document.querySelector(".music-container");t.onclick=n=>{n.stopPropagation()}},m=()=>{if(!i)return;const e=document.getElementById("musicAPlayer");if(!e||a.length<1||(l(),e.classList.contains("aplayer")))return;const t=window;t.musicAPlayer=new i({container:document.getElementById("musicAPlayer"),audio:a,lrcType:3,listFolded:!1,listMaxHeight:"324px",mini:!1,fixed:!1,volume:1,storageName:"musicAPlayer"}),t.musicAPlayer.on("play",function(){l()}),t.musicAPlayer.on("pause",function(){l()})},r=()=>{fetch("https://www.zwymw.top/api/music.json").then(e=>e.json()).then(e=>{e&&e.length>0&&(a=e,m())})},l=()=>{var s,t;const e=window;e.musicAPlayer&&e.musicAPlayer.mode&&(e.musicAPlayer.paused?(s=document.getElementById("music-icon"))==null||s.classList.remove("spin"):(t=document.getElementById("music-icon"))==null||t.classList.add("spin"))},d=()=>{c.value=!1};return v(()=>{const e=_();h(()=>import("./APlayer.min-CAgWaKXK.js").then(s=>s.A),__vite__mapDeps([0,1])).then(s=>{w(()=>{i=s.default,u(),r(),window.document.body.onclick=()=>{c.value=!1}}),e.beforeEach(()=>{setTimeout(()=>{u(),r()},50)})})}),(e,s)=>{const t=P("HopeIcon");return g(),A("div",null,[o("div",B,[o("div",{class:E(["music-box",{hide:!c.value}])},[o("div",{class:"close",onClick:d},[x(t,{icon:"close"})]),I],2)])])}}}),C=k(L,[["__file","NavMusic.vue"]]);export{C as default};
