const __vite__fileDeps=["assets/APlayer.min-CAgWaKXK.js","assets/commonjsHelpers-Cpj98o6Y.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{h as p,i as y,j as _,k as v,l as f,m as h,n as w,r as P,o as E,c as A,a as o,p as g,d as k,_ as B}from"./app-CX0b13KQ.js";const I={class:"music-container"},L=o("div",{id:"musicAPlayer"},null,-1),b=p({__name:"NavMusic",setup(x){let i,a=y([]);const c=_(!1),u=()=>{const e=document.querySelector(".vp-navbar-end");if(!e)return;if(!document.querySelector("#music-btn")){const s=document.createElement("div");s.id="music-btn",s.classList.add("nav-item"),s.innerHTML='<div id="music-icon" class="btnImg"/>',e.appendChild(s)}const n=document.querySelector("#music-btn");n.onclick=s=>{c.value=!c.value,s.stopPropagation()};const t=document.querySelector(".music-container");t.onclick=s=>{s.stopPropagation()}},m=()=>{if(!i)return;const e=document.getElementById("musicAPlayer");if(!e||a.length<1||(l(),e.classList.contains("aplayer")))return;const t=window;t.musicAPlayer=new i({container:document.getElementById("musicAPlayer"),audio:a,lrcType:3}),t.musicAPlayer.on("play",function(){l()}),t.musicAPlayer.on("pause",function(){l()})},r=()=>{fetch("https://www.zwymw.top/api/music.json").then(e=>e.json()).then(e=>{e&&e.length>0&&(a=e,m())})},l=()=>{var n,t;const e=window;e.musicAPlayer&&e.musicAPlayer.mode&&(e.musicAPlayer.paused?(n=document.getElementById("music-icon"))==null||n.classList.remove("spin"):(t=document.getElementById("music-icon"))==null||t.classList.add("spin"))},d=()=>{c.value=!1};return v(()=>{const e=f();h(()=>import("./APlayer.min-CAgWaKXK.js").then(n=>n.A),__vite__mapDeps([0,1])).then(n=>{w(()=>{i=n.default,u(),r(),window.document.body.onclick=()=>{c.value=!1}}),e.beforeEach(()=>{setTimeout(()=>{u(),r()},50)})})}),(e,n)=>{const t=P("HopeIcon");return E(),A("div",null,[o("div",I,[o("div",{class:g(["music-box",{hide:!c.value}])},[o("div",{class:"close",onClick:d},[k(t,{icon:"close"})]),L],2)])])}}}),M=B(b,[["__file","NavMusic.vue"]]);export{M as default};
